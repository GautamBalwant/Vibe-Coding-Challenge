<% if (property) { %>
  <div class="max-w-6xl mx-auto">
    <!-- Back Button -->
    <a href="/explore" class="inline-block mb-4 text-blue-600 hover:text-blue-800">
      ‚Üê Back to Properties
    </a>
    
    <!-- Property Header -->
    <div class="bg-white rounded-lg shadow-lg overflow-hidden mb-6">
      <!-- Main Image Gallery -->
      <div class="relative h-96 bg-gray-200">
        <img 
          src="https://picsum.photos/seed/<%= property.id %>/1200/600" 
          alt="<%= property.title %>"
          class="w-full h-full object-cover"
          onerror="this.src='https://via.placeholder.com/1200x600?text=Property+Image'"
        />
        <% if (property.featured) { %>
          <span class="absolute top-4 left-4 bg-yellow-400 text-gray-800 px-4 py-2 rounded-full text-sm font-semibold">
            ‚òÖ Featured Property
          </span>
        <% } %>
        <span class="absolute top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-semibold">
          <%= property.propertyType %>
        </span>
      </div>
      
      <!-- Thumbnail Gallery -->
      <% if (property.media && property.media.length > 1) { %>
        <div class="flex gap-2 p-4 overflow-x-auto">
          <% property.media.slice(0, 5).forEach(function(media, index) { %>
            <img 
              src="https://picsum.photos/seed/<%= property.id %>-<%= index %>/200/150" 
              alt="<%= media.altText || 'Property view ' + (index + 1) %>"
              class="w-32 h-24 object-cover rounded cursor-pointer hover:opacity-75 transition-opacity"
            />
          <% }); %>
        </div>
      <% } %>
    </div>
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Main Content -->
      <div class="lg:col-span-2">
        <!-- Property Title and Price -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
          <h1 class="text-3xl font-bold text-gray-800 mb-4"><%= property.title %></h1>
          <div class="flex items-center justify-between mb-4">
            <div>
              <p class="text-3xl font-bold text-blue-600">‚Çπ<%= (property.price / 100000).toFixed(2) %> Lacs</p>
              <p class="text-gray-500 text-sm"><%= property.currency %></p>
            </div>
            <span class="<%= property.status === 'Active' ? 'bg-green-100 text-green-800' : 'bg-orange-100 text-orange-800' %> px-4 py-2 rounded-full font-semibold">
              <%= property.status %>
            </span>
          </div>
          
          <!-- Key Features -->
          <div class="grid grid-cols-3 gap-4 py-4 border-t border-b">
            <div class="text-center">
              <p class="text-2xl font-bold text-gray-800"><%= property.bedrooms %></p>
              <p class="text-gray-600 text-sm">Bedrooms</p>
            </div>
            <div class="text-center">
              <p class="text-2xl font-bold text-gray-800"><%= property.bathrooms %></p>
              <p class="text-gray-600 text-sm">Bathrooms</p>
            </div>
            <div class="text-center">
              <p class="text-2xl font-bold text-gray-800"><%= property.areaSqft %></p>
              <p class="text-gray-600 text-sm">Sq Ft</p>
            </div>
          </div>
        </div>
        
        <!-- Description -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-4">Description</h2>
          <p class="text-gray-700 leading-relaxed"><%= property.description %></p>
        </div>
        
        <!-- Amenities -->
        <% if (property.amenities && property.amenities.length > 0) { %>
          <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Amenities</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
              <% property.amenities.forEach(function(amenity) { %>
                <div class="flex items-center space-x-2 text-gray-700">
                  <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                  <span><%= amenity %></span>
                </div>
              <% }); %>
            </div>
          </div>
        <% } %>
        
        <!-- Location -->
        <div class="bg-white rounded-lg shadow-lg p-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-4">Location</h2>
          <% if (property.address) { %>
            <div class="space-y-2 text-gray-700">
              <p><strong>Address:</strong> <%= property.address.line %></p>
              <p><strong>City:</strong> <%= property.address.city %></p>
              <p><strong>State:</strong> <%= property.address.state %></p>
              <p><strong>Pincode:</strong> <%= property.address.pincode %></p>
              <p><strong>Country:</strong> <%= property.address.country %></p>
            </div>
          <% } %>
        </div>
      </div>
      
      <!-- Sidebar -->
      <div class="lg:col-span-1">
        <!-- Contact Card -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6 sticky top-4">
          <h3 class="text-xl font-bold text-gray-800 mb-4">Interested in this property?</h3>
          <button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg mb-3 transition-colors duration-200">
            Contact Agent
          </button>
          <button class="w-full bg-white hover:bg-gray-50 text-blue-600 border-2 border-blue-600 font-semibold py-3 px-4 rounded-lg mb-3 transition-colors duration-200">
            Schedule Visit
          </button>
          <button class="w-full bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 px-4 rounded-lg transition-colors duration-200">
            ‚ù§Ô∏è Save to Favorites
          </button>
          
          <div class="mt-6 pt-6 border-t">
            <p class="text-sm text-gray-600 mb-2">Property ID: <strong>#<%= property.id %></strong></p>
            <% if (property.brokerId) { %>
              <p class="text-sm text-gray-600">Broker ID: <strong>#<%= property.brokerId %></strong></p>
            <% } %>
          </div>
        </div>
        
        <!-- Share Property -->
        <div class="bg-white rounded-lg shadow-lg p-6">
          <h3 class="text-xl font-bold text-gray-800 mb-4">Share Property</h3>
          <div class="flex space-x-3">
            <button class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 rounded transition-colors">
              Facebook
            </button>
            <button class="flex-1 bg-blue-400 hover:bg-blue-500 text-white py-2 rounded transition-colors">
              Twitter
            </button>
            <button class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 rounded transition-colors">
              WhatsApp
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
<% } else { %>
  <div class="text-center py-12">
    <div class="text-6xl mb-4">üè†</div>
    <h2 class="text-2xl font-bold text-gray-800 mb-2">Property Not Found</h2>
    <p class="text-gray-600 mb-6">The property you're looking for doesn't exist or has been removed.</p>
    <a href="/explore" class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
      Browse All Properties
    </a>
  </div>
<% } %>
